<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1" />
<meta name="generator" content="pdoc 0.9.1" />
<title>nlisim.modules.neutrophil API documentation</title>
<meta name="description" content="" />
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/sanitize.min.css" integrity="sha256-PK9q560IAAa6WVRRh76LtCaI8pjTJ2z11v0miyNNjrs=" crossorigin>
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/typography.min.css" integrity="sha256-7l/o7C8jubJiy74VsKTidCy1yBkRtiUGbVkYBylBqUg=" crossorigin>
<link rel="stylesheet preload" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/styles/github.min.css" crossorigin>
<style>:root{--highlight-color:#fe9}.flex{display:flex !important}body{line-height:1.5em}#content{padding:20px}#sidebar{padding:30px;overflow:hidden}#sidebar > *:last-child{margin-bottom:2cm}.http-server-breadcrumbs{font-size:130%;margin:0 0 15px 0}#footer{font-size:.75em;padding:5px 30px;border-top:1px solid #ddd;text-align:right}#footer p{margin:0 0 0 1em;display:inline-block}#footer p:last-child{margin-right:30px}h1,h2,h3,h4,h5{font-weight:300}h1{font-size:2.5em;line-height:1.1em}h2{font-size:1.75em;margin:1em 0 .50em 0}h3{font-size:1.4em;margin:25px 0 10px 0}h4{margin:0;font-size:105%}h1:target,h2:target,h3:target,h4:target,h5:target,h6:target{background:var(--highlight-color);padding:.2em 0}a{color:#058;text-decoration:none;transition:color .3s ease-in-out}a:hover{color:#e82}.title code{font-weight:bold}h2[id^="header-"]{margin-top:2em}.ident{color:#900}pre code{background:#f8f8f8;font-size:.8em;line-height:1.4em}code{background:#f2f2f1;padding:1px 4px;overflow-wrap:break-word}h1 code{background:transparent}pre{background:#f8f8f8;border:0;border-top:1px solid #ccc;border-bottom:1px solid #ccc;margin:1em 0;padding:1ex}#http-server-module-list{display:flex;flex-flow:column}#http-server-module-list div{display:flex}#http-server-module-list dt{min-width:10%}#http-server-module-list p{margin-top:0}.toc ul,#index{list-style-type:none;margin:0;padding:0}#index code{background:transparent}#index h3{border-bottom:1px solid #ddd}#index ul{padding:0}#index h4{margin-top:.6em;font-weight:bold}@media (min-width:200ex){#index .two-column{column-count:2}}@media (min-width:300ex){#index .two-column{column-count:3}}dl{margin-bottom:2em}dl dl:last-child{margin-bottom:4em}dd{margin:0 0 1em 3em}#header-classes + dl > dd{margin-bottom:3em}dd dd{margin-left:2em}dd p{margin:10px 0}.name{background:#eee;font-weight:bold;font-size:.85em;padding:5px 10px;display:inline-block;min-width:40%}.name:hover{background:#e0e0e0}dt:target .name{background:var(--highlight-color)}.name > span:first-child{white-space:nowrap}.name.class > span:nth-child(2){margin-left:.4em}.inherited{color:#999;border-left:5px solid #eee;padding-left:1em}.inheritance em{font-style:normal;font-weight:bold}.desc h2{font-weight:400;font-size:1.25em}.desc h3{font-size:1em}.desc dt code{background:inherit}.source summary,.git-link-div{color:#666;text-align:right;font-weight:400;font-size:.8em;text-transform:uppercase}.source summary > *{white-space:nowrap;cursor:pointer}.git-link{color:inherit;margin-left:1em}.source pre{max-height:500px;overflow:auto;margin:0}.source pre code{font-size:12px;overflow:visible}.hlist{list-style:none}.hlist li{display:inline}.hlist li:after{content:',\2002'}.hlist li:last-child:after{content:none}.hlist .hlist{display:inline;padding-left:1em}img{max-width:100%}td{padding:0 .5em}.admonition{padding:.1em .5em;margin-bottom:1em}.admonition-title{font-weight:bold}.admonition.note,.admonition.info,.admonition.important{background:#aef}.admonition.todo,.admonition.versionadded,.admonition.tip,.admonition.hint{background:#dfd}.admonition.warning,.admonition.versionchanged,.admonition.deprecated{background:#fd4}.admonition.error,.admonition.danger,.admonition.caution{background:lightpink}</style>
<style media="screen and (min-width: 700px)">@media screen and (min-width:700px){#sidebar{width:30%;height:100vh;overflow:auto;position:sticky;top:0}#content{width:70%;max-width:100ch;padding:3em 4em;border-left:1px solid #ddd}pre code{font-size:1em}.item .name{font-size:1em}main{display:flex;flex-direction:row-reverse;justify-content:flex-end}.toc ul ul,#index ul{padding-left:1.5em}.toc > ul > li{margin-top:.5em}}</style>
<style media="print">@media print{#sidebar h1{page-break-before:always}.source{display:none}}@media print{*{background:transparent !important;color:#000 !important;box-shadow:none !important;text-shadow:none !important}a[href]:after{content:" (" attr(href) ")";font-size:90%}a[href][title]:after{content:none}abbr[title]:after{content:" (" attr(title) ")"}.ir a:after,a[href^="javascript:"]:after,a[href^="#"]:after{content:""}pre,blockquote{border:1px solid #999;page-break-inside:avoid}thead{display:table-header-group}tr,img{page-break-inside:avoid}img{max-width:100% !important}@page{margin:0.5cm}p,h2,h3{orphans:3;widows:3}h1,h2,h3,h4,h5,h6{page-break-after:avoid}}</style>
<script async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS_CHTML" integrity="sha256-kZafAc6mZvK3W3v1pHOcUix30OHQN6pU/NO2oFkqZVw=" crossorigin></script>
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/highlight.min.js" integrity="sha256-Uv3H6lx7dJmRfRvH8TH6kJD1TSK1aFcwgx+mdg3epi8=" crossorigin></script>
<script>window.addEventListener('DOMContentLoaded', () => hljs.initHighlighting())</script>
</head>
<body>
<main>
<article id="content">
<header>
<h1 class="title">Module <code>nlisim.modules.neutrophil</code></h1>
</header>
<section id="section-intro">
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">from enum import IntEnum

import attr
import numpy as np

from nlisim.cell import CellData, CellList
from nlisim.coordinates import Point, Voxel
from nlisim.grid import RectangularGrid
from nlisim.module import Module, ModuleState
from nlisim.modules.fungus import FungusCellData, FungusCellList
from nlisim.modules.geometry import TissueTypes
from nlisim.random import rg
from nlisim.state import State


class NeutrophilCellData(CellData):
    class Status(IntEnum):
        NONGRANULATING = 0
        GRANULATING = 1

    NEUTROPHIL_FIELDS = [(&#39;status&#39;, &#39;u1&#39;), (&#39;iteration&#39;, &#39;i4&#39;), (&#39;granule_count&#39;, &#39;i4&#39;)]

    dtype = np.dtype(CellData.FIELDS + NEUTROPHIL_FIELDS, align=True)  # type: ignore

    @classmethod
    def create_cell_tuple(
        cls,
        *,
        status=Status.NONGRANULATING,
        granule_count=0,
        **kwargs,
    ) -&gt; np.record:
        iteration = 0
        return CellData.create_cell_tuple(**kwargs) + (
            status,
            iteration,
            granule_count,
        )


@attr.s(kw_only=True, frozen=True, repr=False)
class NeutrophilCellList(CellList):
    CellDataClass = NeutrophilCellData

    def recruit_new(self, rec_rate_ph, rec_r, granule_count, neutropenic, time, grid, tissue, cyto):
        num_reps = 0
        if not neutropenic:
            num_reps = rec_rate_ph  # number of neutrophils recruited per time step
        elif neutropenic and time &gt;= 48 and time &lt;= 96:
            num_reps = int((time - 48) / 8) * 3

        if num_reps &gt; 0:
            blood_index = np.argwhere(tissue == TissueTypes.BLOOD.value)
            blood_index = np.transpose(blood_index)
            mask = cyto[blood_index[2], blood_index[1], blood_index[0]] &gt;= rec_r
            blood_index = np.transpose(blood_index)
            cyto_index = blood_index[mask]
            rg.shuffle(cyto_index)

            for _ in range(0, num_reps):
                if len(cyto_index) &gt; 0:
                    ii = rg.integers(len(cyto_index))
                    point = Point(
                        x=grid.x[cyto_index[ii][2]],
                        y=grid.y[cyto_index[ii][1]],
                        z=grid.z[cyto_index[ii][0]],
                    )

                    status = NeutrophilCellData.Status.NONGRANULATING
                    gc = granule_count
                    self.append(
                        NeutrophilCellData.create_cell(point=point, status=status, granule_count=gc)
                    )

    def absorb_cytokines(self, n_absorb, cyto, grid):
        for index in self.alive():
            vox = grid.get_voxel(self[index][&#39;point&#39;])
            x = vox.x
            y = vox.y
            z = vox.z
            cyto[z, y, x] = (1 - n_absorb) * cyto[z, y, x]

    def produce_cytokines(self, n_det, n_n, grid, fungus: FungusCellList, cyto):
        for i in self.alive():
            vox = grid.get_voxel(self[i][&#39;point&#39;])

            hyphae_count = 0

            x_r = []
            y_r = []
            z_r = []

            if n_det == 0:
                index_arr = fungus.get_cells_in_voxel(vox)
                for index in index_arr:
                    if fungus[index][&#39;form&#39;] == FungusCellData.Form.HYPHAE:
                        hyphae_count += 1

            else:
                for num in range(0, n_det + 1):
                    x_r.append(num)
                    y_r.append(num)
                    z_r.append(num)

                for num in range(-1 * n_det, 0):
                    x_r.append(num)
                    y_r.append(num)
                    z_r.append(num)

                for x in x_r:
                    for y in y_r:
                        for z in z_r:
                            zk = vox.z + z
                            yj = vox.y + y
                            xi = vox.x + x
                            if grid.is_valid_voxel(Voxel(x=xi, y=yj, z=zk)):
                                index_arr = fungus.get_cells_in_voxel(Voxel(x=xi, y=yj, z=zk))
                                for index in index_arr:
                                    if fungus[index][&#39;form&#39;] == FungusCellData.Form.HYPHAE:
                                        hyphae_count += 1

            cyto[vox.z, vox.y, vox.x] = cyto[vox.z, vox.y, vox.x] + (n_n * hyphae_count)

    def move(self, rec_r, grid, cyto, tissue):
        for cell_index in self.alive(
            self.cell_data[&#39;status&#39;] == NeutrophilCellData.Status.NONGRANULATING
        ):
            cell = self[cell_index]
            vox = grid.get_voxel(cell[&#39;point&#39;])

            p = np.zeros(shape=27)
            vox_list = []
            i = -1

            for x in [0, 1, -1]:
                for y in [0, 1, -1]:
                    for z in [0, 1, -1]:
                        zk = vox.z + z
                        yj = vox.y + y
                        xi = vox.x + x
                        if (
                            grid.is_valid_voxel(Voxel(x=xi, y=yj, z=zk))
                            and tissue[zk, yj, xi] != TissueTypes.AIR.value
                        ):
                            vox_list.append([x, y, z])
                            i += 1
                            if cyto[zk, yj, xi] &gt;= rec_r:
                                p[i] = cyto[zk, yj, xi]

            indices = np.argwhere(p != 0)
            num_vox_possible = len(indices)
            if num_vox_possible == 1:
                i = indices[0][0]
            elif num_vox_possible &gt; 1:
                inds = np.argwhere(p == p[np.argmax(p)])
                rg.shuffle(inds)
                i = inds[0][0]
            else:
                i = rg.integers(len(vox_list))

            cell[&#39;point&#39;] = Point(
                x=grid.x[vox.x + vox_list[i][0]],
                y=grid.y[vox.y + vox_list[i][1]],
                z=grid.z[vox.z + vox_list[i][2]],
            )

            self.update_voxel_index([cell_index])

    def damage_hyphae(self, n_det, n_kill, time, health, grid, fungus: FungusCellList, iron):
        for i in self.alive(self.cell_data[&#39;granule_count&#39;] &gt; 0):
            cell = self[i]
            vox = grid.get_voxel(cell[&#39;point&#39;])

            x_r = []
            y_r = []
            z_r = []

            if n_det == 0:
                index_arr = fungus.get_cells_in_voxel(vox)
                if len(index_arr) &gt; 0:
                    iron[vox.z, vox.y, vox.x] = 0
                for index in index_arr:
                    if (
                        fungus[index][&#39;form&#39;] == FungusCellData.Form.HYPHAE
                        and cell[&#39;granule_count&#39;] &gt; 0
                    ):
                        fungus[index][&#39;health&#39;] -= health * (time / n_kill)
                        cell[&#39;granule_count&#39;] -= 1
                        cell[&#39;status&#39;] = NeutrophilCellData.Status.GRANULATING
                    elif cell[&#39;granule_count&#39;] == 0:
                        cell[&#39;status&#39;] = NeutrophilCellData.Status.NONGRANULATING
                        break
            else:
                for num in range(0, n_det + 1):
                    x_r.append(num)
                    y_r.append(num)
                    z_r.append(num)

                for num in range(-1 * n_det, 0):
                    x_r.append(num)
                    y_r.append(num)
                    z_r.append(num)

                for x in x_r:
                    for y in y_r:
                        for z in z_r:
                            zk = vox.z + z
                            yj = vox.y + y
                            xi = vox.x + x
                            if grid.is_valid_voxel(Voxel(x=xi, y=yj, z=zk)):
                                index_arr = fungus.get_cells_in_voxel(Voxel(x=xi, y=yj, z=zk))
                                if len(index_arr) &gt; 0:
                                    iron[zk, yj, xi] = 0
                                for index in index_arr:
                                    if (
                                        fungus[index][&#39;form&#39;] == FungusCellData.Form.HYPHAE
                                        and cell[&#39;granule_count&#39;] &gt; 0
                                    ):
                                        fungus[index][&#39;health&#39;] -= health * (time / n_kill)
                                        cell[&#39;granule_count&#39;] -= 1
                                        cell[&#39;status&#39;] = NeutrophilCellData.Status.GRANULATING
                                    elif cell[&#39;granule_count&#39;] == 0:
                                        cell[&#39;status&#39;] = NeutrophilCellData.Status.NONGRANULATING
                                        break

    def update(self):
        for i in self.alive(self.cell_data[&#39;granule_count&#39;] == 0):
            self[i][&#39;status&#39;] = NeutrophilCellData.Status.NONGRANULATING

    def age(self):
        self.cell_data[&#39;iteration&#39;] += 1

    def kill_by_age(self, age_limit):
        for i in self.alive(self.cell_data[&#39;iteration&#39;] &gt; age_limit):
            self[i][&#39;dead&#39;] = True


def cell_list_factory(self: &#39;NeutrophilState&#39;):
    return NeutrophilCellList(grid=self.global_state.grid)


@attr.s(kw_only=True)
class NeutrophilState(ModuleState):
    cells: NeutrophilCellList = attr.ib(default=attr.Factory(cell_list_factory, takes_self=True))
    neutropenic: bool
    rec_rate_ph: int
    rec_r: float
    n_absorb: float
    n_n: float
    n_det: int
    granule_count: int
    n_kill: float
    time_n: float
    age_limit: int


class Neutrophil(Module):
    name = &#39;neutrophil&#39;
    defaults = {
        &#39;cells&#39;: &#39;&#39;,
        &#39;neutropenic&#39;: &#39;False&#39;,
        &#39;rec_rate_ph&#39;: &#39;6&#39;,
        &#39;rec_r&#39;: &#39;2&#39;,
        &#39;n_absorb&#39;: &#39;0.2&#39;,
        &#39;n_n&#39;: &#39;100&#39;,
        &#39;n_det&#39;: &#39;15&#39;,
        &#39;granule_count&#39;: &#39;10&#39;,
        &#39;n_kill&#39;: &#39;0.05&#39;,
        &#39;time_n&#39;: &#39;1&#39;,
        &#39;age_limit&#39;: &#39;36&#39;,
    }
    StateClass = NeutrophilState

    def initialize(self, state: State):
        neutrophil: NeutrophilState = state.neutrophil
        grid: RectangularGrid = state.grid

        neutrophil.neutropenic = self.config.getboolean(&#39;neutropenic&#39;)
        neutrophil.rec_rate_ph = self.config.getint(&#39;rec_rate_ph&#39;)
        neutrophil.rec_r = self.config.getfloat(&#39;rec_r&#39;)
        neutrophil.n_absorb = self.config.getfloat(&#39;n_absorb&#39;)
        neutrophil.n_n = self.config.getfloat(&#39;Nn&#39;)
        neutrophil.n_det = self.config.getint(&#39;n_det&#39;)
        neutrophil.granule_count = self.config.getint(&#39;granule_count&#39;)
        neutrophil.n_kill = self.config.getfloat(&#39;n_kill&#39;)
        neutrophil.time_n = self.config.getfloat(&#39;time_step&#39;)
        neutrophil.age_limit = self.config.getint(&#39;age_limit&#39;)

        neutrophil.cells = NeutrophilCellList(grid=grid)

        return state

    def advance(self, state: State, previous_time: float):
        neutrophil: NeutrophilState = state.neutrophil
        n_cells = neutrophil.cells
        fungus = state.fungus.cells
        health = state.fungus.health

        tissue = state.geometry.lung_tissue
        grid = state.grid
        cyto = state.molecules.grid[&#39;n_cyto&#39;]
        iron = state.molecules.grid[&#39;iron&#39;]

        # recruit new
        n_cells.recruit_new(
            neutrophil.rec_rate_ph,
            neutrophil.rec_r,
            neutrophil.granule_count,
            neutrophil.neutropenic,
            previous_time,
            grid,
            tissue,
            cyto,
        )

        # absorb cytokines
        n_cells.absorb_cytokines(neutrophil.n_absorb, cyto, grid)

        # produce cytokines
        n_cells.produce_cytokines(neutrophil.n_det, neutrophil.n_n, grid, fungus, cyto)

        # move
        n_cells.move(neutrophil.rec_r, grid, cyto, tissue)

        n_cells.damage_hyphae(
            neutrophil.n_det, neutrophil.n_kill, neutrophil.time_n, health, grid, fungus, iron
        )

        # update granule == 0 status
        n_cells.update()

        n_cells.age()

        n_cells.kill_by_age(neutrophil.age_limit)

        return state</code></pre>
</details>
</section>
<section>
</section>
<section>
</section>
<section>
<h2 class="section-title" id="header-functions">Functions</h2>
<dl>
<dt id="nlisim.modules.neutrophil.cell_list_factory"><code class="name flex">
<span>def <span class="ident">cell_list_factory</span></span>(<span>self: <a title="nlisim.modules.neutrophil.NeutrophilState" href="#nlisim.modules.neutrophil.NeutrophilState">NeutrophilState</a>)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def cell_list_factory(self: &#39;NeutrophilState&#39;):
    return NeutrophilCellList(grid=self.global_state.grid)</code></pre>
</details>
</dd>
</dl>
</section>
<section>
<h2 class="section-title" id="header-classes">Classes</h2>
<dl>
<dt id="nlisim.modules.neutrophil.Neutrophil"><code class="flex name class">
<span>class <span class="ident">Neutrophil</span></span>
<span>(</span><span>config: <a title="nlisim.config.SimulationConfig" href="../config.html#nlisim.config.SimulationConfig">SimulationConfig</a>)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class Neutrophil(Module):
    name = &#39;neutrophil&#39;
    defaults = {
        &#39;cells&#39;: &#39;&#39;,
        &#39;neutropenic&#39;: &#39;False&#39;,
        &#39;rec_rate_ph&#39;: &#39;6&#39;,
        &#39;rec_r&#39;: &#39;2&#39;,
        &#39;n_absorb&#39;: &#39;0.2&#39;,
        &#39;n_n&#39;: &#39;100&#39;,
        &#39;n_det&#39;: &#39;15&#39;,
        &#39;granule_count&#39;: &#39;10&#39;,
        &#39;n_kill&#39;: &#39;0.05&#39;,
        &#39;time_n&#39;: &#39;1&#39;,
        &#39;age_limit&#39;: &#39;36&#39;,
    }
    StateClass = NeutrophilState

    def initialize(self, state: State):
        neutrophil: NeutrophilState = state.neutrophil
        grid: RectangularGrid = state.grid

        neutrophil.neutropenic = self.config.getboolean(&#39;neutropenic&#39;)
        neutrophil.rec_rate_ph = self.config.getint(&#39;rec_rate_ph&#39;)
        neutrophil.rec_r = self.config.getfloat(&#39;rec_r&#39;)
        neutrophil.n_absorb = self.config.getfloat(&#39;n_absorb&#39;)
        neutrophil.n_n = self.config.getfloat(&#39;Nn&#39;)
        neutrophil.n_det = self.config.getint(&#39;n_det&#39;)
        neutrophil.granule_count = self.config.getint(&#39;granule_count&#39;)
        neutrophil.n_kill = self.config.getfloat(&#39;n_kill&#39;)
        neutrophil.time_n = self.config.getfloat(&#39;time_step&#39;)
        neutrophil.age_limit = self.config.getint(&#39;age_limit&#39;)

        neutrophil.cells = NeutrophilCellList(grid=grid)

        return state

    def advance(self, state: State, previous_time: float):
        neutrophil: NeutrophilState = state.neutrophil
        n_cells = neutrophil.cells
        fungus = state.fungus.cells
        health = state.fungus.health

        tissue = state.geometry.lung_tissue
        grid = state.grid
        cyto = state.molecules.grid[&#39;n_cyto&#39;]
        iron = state.molecules.grid[&#39;iron&#39;]

        # recruit new
        n_cells.recruit_new(
            neutrophil.rec_rate_ph,
            neutrophil.rec_r,
            neutrophil.granule_count,
            neutrophil.neutropenic,
            previous_time,
            grid,
            tissue,
            cyto,
        )

        # absorb cytokines
        n_cells.absorb_cytokines(neutrophil.n_absorb, cyto, grid)

        # produce cytokines
        n_cells.produce_cytokines(neutrophil.n_det, neutrophil.n_n, grid, fungus, cyto)

        # move
        n_cells.move(neutrophil.rec_r, grid, cyto, tissue)

        n_cells.damage_hyphae(
            neutrophil.n_det, neutrophil.n_kill, neutrophil.time_n, health, grid, fungus, iron
        )

        # update granule == 0 status
        n_cells.update()

        n_cells.age()

        n_cells.kill_by_age(neutrophil.age_limit)

        return state</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li><a title="nlisim.module.Module" href="../module.html#nlisim.module.Module">Module</a></li>
</ul>
<h3>Inherited members</h3>
<ul class="hlist">
<li><code><b><a title="nlisim.module.Module" href="../module.html#nlisim.module.Module">Module</a></b></code>:
<ul class="hlist">
<li><code><a title="nlisim.module.Module.StateClass" href="../module.html#nlisim.module.Module.StateClass">StateClass</a></code></li>
<li><code><a title="nlisim.module.Module.advance" href="../module.html#nlisim.module.Module.advance">advance</a></code></li>
<li><code><a title="nlisim.module.Module.construct" href="../module.html#nlisim.module.Module.construct">construct</a></code></li>
<li><code><a title="nlisim.module.Module.defaults" href="../module.html#nlisim.module.Module.defaults">defaults</a></code></li>
<li><code><a title="nlisim.module.Module.finalize" href="../module.html#nlisim.module.Module.finalize">finalize</a></code></li>
<li><code><a title="nlisim.module.Module.initialize" href="../module.html#nlisim.module.Module.initialize">initialize</a></code></li>
<li><code><a title="nlisim.module.Module.name" href="../module.html#nlisim.module.Module.name">name</a></code></li>
<li><code><a title="nlisim.module.Module.section" href="../module.html#nlisim.module.Module.section">section</a></code></li>
</ul>
</li>
</ul>
</dd>
<dt id="nlisim.modules.neutrophil.NeutrophilCellData"><code class="flex name class">
<span>class <span class="ident">NeutrophilCellData</span></span>
<span>(</span><span>arg: Union[int, Iterable[numpy.record]], initialize: bool = False, **kwargs)</span>
</code></dt>
<dd>
<div class="desc"><p>A low-level data contain for an array cells.</p>
<p>This class is a subtype of
<a href="https://docs.scipy.org/doc/numpy/reference/generated/numpy.recarray.html">numpy.recarray</a>
containing the lowest level representation of a list of "cells" in a
simulation.
The underlying data format of this type are identical to a
simple array of C structures with the fields given in the static "dtype"
variable.</p>
<p>The base class contains only a single coordinate representing the location
of the center of the cell.
Most implementations will want to override this
class to append more fields.
Subclasses must also override the base
implementation of <code>create_cell</code> to construct a single record containing
the additional fields.</p>
<p>For example, the following derived class adds an addition floating point value
associated with each cell.</p>
<pre><code class="python">class DerivedCell(CellData):
    FIELDS = CellData.FIELDS + [
        ('iron_content', 'f8')
    ]

    dtype = np.dtype(CellData.FIELDS, align=True)

    @classmethod
    def create_cell_tuple(cls, iron_content=0, **kwargs):
        return CellData.create_cell_tuple(**kwargs) + (iron_content,)
</code></pre></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class NeutrophilCellData(CellData):
    class Status(IntEnum):
        NONGRANULATING = 0
        GRANULATING = 1

    NEUTROPHIL_FIELDS = [(&#39;status&#39;, &#39;u1&#39;), (&#39;iteration&#39;, &#39;i4&#39;), (&#39;granule_count&#39;, &#39;i4&#39;)]

    dtype = np.dtype(CellData.FIELDS + NEUTROPHIL_FIELDS, align=True)  # type: ignore

    @classmethod
    def create_cell_tuple(
        cls,
        *,
        status=Status.NONGRANULATING,
        granule_count=0,
        **kwargs,
    ) -&gt; np.record:
        iteration = 0
        return CellData.create_cell_tuple(**kwargs) + (
            status,
            iteration,
            granule_count,
        )</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li><a title="nlisim.cell.CellData" href="../cell.html#nlisim.cell.CellData">CellData</a></li>
<li>numpy.ndarray</li>
</ul>
<h3>Class variables</h3>
<dl>
<dt id="nlisim.modules.neutrophil.NeutrophilCellData.NEUTROPHIL_FIELDS"><code class="name">var <span class="ident">NEUTROPHIL_FIELDS</span></code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="nlisim.modules.neutrophil.NeutrophilCellData.Status"><code class="name">var <span class="ident">Status</span></code></dt>
<dd>
<div class="desc"><p>An enumeration.</p></div>
</dd>
</dl>
<h3>Inherited members</h3>
<ul class="hlist">
<li><code><b><a title="nlisim.cell.CellData" href="../cell.html#nlisim.cell.CellData">CellData</a></b></code>:
<ul class="hlist">
<li><code><a title="nlisim.cell.CellData.FIELDS" href="../cell.html#nlisim.cell.CellData.FIELDS">FIELDS</a></code></li>
<li><code><a title="nlisim.cell.CellData.create_cell" href="../cell.html#nlisim.cell.CellData.create_cell">create_cell</a></code></li>
<li><code><a title="nlisim.cell.CellData.create_cell_tuple" href="../cell.html#nlisim.cell.CellData.create_cell_tuple">create_cell_tuple</a></code></li>
<li><code><a title="nlisim.cell.CellData.dtype" href="../cell.html#nlisim.cell.CellData.dtype">dtype</a></code></li>
<li><code><a title="nlisim.cell.CellData.point_mask" href="../cell.html#nlisim.cell.CellData.point_mask">point_mask</a></code></li>
</ul>
</li>
</ul>
</dd>
<dt id="nlisim.modules.neutrophil.NeutrophilCellList"><code class="flex name class">
<span>class <span class="ident">NeutrophilCellList</span></span>
<span>(</span><span>*, grid: <a title="nlisim.grid.RectangularGrid" href="../grid.html#nlisim.grid.RectangularGrid">RectangularGrid</a>, max_cells: int = 1000000, cell_data: <a title="nlisim.cell.CellData" href="../cell.html#nlisim.cell.CellData">CellData</a> = NOTHING)</span>
</code></dt>
<dd>
<div class="desc"><p>A python view on top of a CellData array.</p>
<p>This class represents a pythonic interface to the data contained in a
CellData array.
Because the CellData class is a low-level object, it does
not allow dynamically appending new elements.
Objects of this class get
around this limitation by pre-allocating a large block of memory that is
transparently available.
User-facing properties are sliced to make it
appear as if the extra data is not there.</p>
<p>Subclassed types are expected to set the <code>CellDataClass</code> attribute to
a subclass of <code>CellData</code>.
This provides information about the underlying
low-level array.</p>
<h2 id="parameters">Parameters</h2>
<dl>
<dt><strong><code>grid</code></strong> :&ensp;<code>simulation.grid.RectangularGrid</code></dt>
<dd>&nbsp;</dd>
<dt><strong><code>max_cells</code></strong> :&ensp;<code>int</code>, optional</dt>
<dd>&nbsp;</dd>
<dt><strong><code>cells</code></strong> :&ensp;<code>simulation.cell.CellData</code>, optional</dt>
<dd>&nbsp;</dd>
</dl>
<p>Method generated by attrs for class NeutrophilCellList.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class NeutrophilCellList(CellList):
    CellDataClass = NeutrophilCellData

    def recruit_new(self, rec_rate_ph, rec_r, granule_count, neutropenic, time, grid, tissue, cyto):
        num_reps = 0
        if not neutropenic:
            num_reps = rec_rate_ph  # number of neutrophils recruited per time step
        elif neutropenic and time &gt;= 48 and time &lt;= 96:
            num_reps = int((time - 48) / 8) * 3

        if num_reps &gt; 0:
            blood_index = np.argwhere(tissue == TissueTypes.BLOOD.value)
            blood_index = np.transpose(blood_index)
            mask = cyto[blood_index[2], blood_index[1], blood_index[0]] &gt;= rec_r
            blood_index = np.transpose(blood_index)
            cyto_index = blood_index[mask]
            rg.shuffle(cyto_index)

            for _ in range(0, num_reps):
                if len(cyto_index) &gt; 0:
                    ii = rg.integers(len(cyto_index))
                    point = Point(
                        x=grid.x[cyto_index[ii][2]],
                        y=grid.y[cyto_index[ii][1]],
                        z=grid.z[cyto_index[ii][0]],
                    )

                    status = NeutrophilCellData.Status.NONGRANULATING
                    gc = granule_count
                    self.append(
                        NeutrophilCellData.create_cell(point=point, status=status, granule_count=gc)
                    )

    def absorb_cytokines(self, n_absorb, cyto, grid):
        for index in self.alive():
            vox = grid.get_voxel(self[index][&#39;point&#39;])
            x = vox.x
            y = vox.y
            z = vox.z
            cyto[z, y, x] = (1 - n_absorb) * cyto[z, y, x]

    def produce_cytokines(self, n_det, n_n, grid, fungus: FungusCellList, cyto):
        for i in self.alive():
            vox = grid.get_voxel(self[i][&#39;point&#39;])

            hyphae_count = 0

            x_r = []
            y_r = []
            z_r = []

            if n_det == 0:
                index_arr = fungus.get_cells_in_voxel(vox)
                for index in index_arr:
                    if fungus[index][&#39;form&#39;] == FungusCellData.Form.HYPHAE:
                        hyphae_count += 1

            else:
                for num in range(0, n_det + 1):
                    x_r.append(num)
                    y_r.append(num)
                    z_r.append(num)

                for num in range(-1 * n_det, 0):
                    x_r.append(num)
                    y_r.append(num)
                    z_r.append(num)

                for x in x_r:
                    for y in y_r:
                        for z in z_r:
                            zk = vox.z + z
                            yj = vox.y + y
                            xi = vox.x + x
                            if grid.is_valid_voxel(Voxel(x=xi, y=yj, z=zk)):
                                index_arr = fungus.get_cells_in_voxel(Voxel(x=xi, y=yj, z=zk))
                                for index in index_arr:
                                    if fungus[index][&#39;form&#39;] == FungusCellData.Form.HYPHAE:
                                        hyphae_count += 1

            cyto[vox.z, vox.y, vox.x] = cyto[vox.z, vox.y, vox.x] + (n_n * hyphae_count)

    def move(self, rec_r, grid, cyto, tissue):
        for cell_index in self.alive(
            self.cell_data[&#39;status&#39;] == NeutrophilCellData.Status.NONGRANULATING
        ):
            cell = self[cell_index]
            vox = grid.get_voxel(cell[&#39;point&#39;])

            p = np.zeros(shape=27)
            vox_list = []
            i = -1

            for x in [0, 1, -1]:
                for y in [0, 1, -1]:
                    for z in [0, 1, -1]:
                        zk = vox.z + z
                        yj = vox.y + y
                        xi = vox.x + x
                        if (
                            grid.is_valid_voxel(Voxel(x=xi, y=yj, z=zk))
                            and tissue[zk, yj, xi] != TissueTypes.AIR.value
                        ):
                            vox_list.append([x, y, z])
                            i += 1
                            if cyto[zk, yj, xi] &gt;= rec_r:
                                p[i] = cyto[zk, yj, xi]

            indices = np.argwhere(p != 0)
            num_vox_possible = len(indices)
            if num_vox_possible == 1:
                i = indices[0][0]
            elif num_vox_possible &gt; 1:
                inds = np.argwhere(p == p[np.argmax(p)])
                rg.shuffle(inds)
                i = inds[0][0]
            else:
                i = rg.integers(len(vox_list))

            cell[&#39;point&#39;] = Point(
                x=grid.x[vox.x + vox_list[i][0]],
                y=grid.y[vox.y + vox_list[i][1]],
                z=grid.z[vox.z + vox_list[i][2]],
            )

            self.update_voxel_index([cell_index])

    def damage_hyphae(self, n_det, n_kill, time, health, grid, fungus: FungusCellList, iron):
        for i in self.alive(self.cell_data[&#39;granule_count&#39;] &gt; 0):
            cell = self[i]
            vox = grid.get_voxel(cell[&#39;point&#39;])

            x_r = []
            y_r = []
            z_r = []

            if n_det == 0:
                index_arr = fungus.get_cells_in_voxel(vox)
                if len(index_arr) &gt; 0:
                    iron[vox.z, vox.y, vox.x] = 0
                for index in index_arr:
                    if (
                        fungus[index][&#39;form&#39;] == FungusCellData.Form.HYPHAE
                        and cell[&#39;granule_count&#39;] &gt; 0
                    ):
                        fungus[index][&#39;health&#39;] -= health * (time / n_kill)
                        cell[&#39;granule_count&#39;] -= 1
                        cell[&#39;status&#39;] = NeutrophilCellData.Status.GRANULATING
                    elif cell[&#39;granule_count&#39;] == 0:
                        cell[&#39;status&#39;] = NeutrophilCellData.Status.NONGRANULATING
                        break
            else:
                for num in range(0, n_det + 1):
                    x_r.append(num)
                    y_r.append(num)
                    z_r.append(num)

                for num in range(-1 * n_det, 0):
                    x_r.append(num)
                    y_r.append(num)
                    z_r.append(num)

                for x in x_r:
                    for y in y_r:
                        for z in z_r:
                            zk = vox.z + z
                            yj = vox.y + y
                            xi = vox.x + x
                            if grid.is_valid_voxel(Voxel(x=xi, y=yj, z=zk)):
                                index_arr = fungus.get_cells_in_voxel(Voxel(x=xi, y=yj, z=zk))
                                if len(index_arr) &gt; 0:
                                    iron[zk, yj, xi] = 0
                                for index in index_arr:
                                    if (
                                        fungus[index][&#39;form&#39;] == FungusCellData.Form.HYPHAE
                                        and cell[&#39;granule_count&#39;] &gt; 0
                                    ):
                                        fungus[index][&#39;health&#39;] -= health * (time / n_kill)
                                        cell[&#39;granule_count&#39;] -= 1
                                        cell[&#39;status&#39;] = NeutrophilCellData.Status.GRANULATING
                                    elif cell[&#39;granule_count&#39;] == 0:
                                        cell[&#39;status&#39;] = NeutrophilCellData.Status.NONGRANULATING
                                        break

    def update(self):
        for i in self.alive(self.cell_data[&#39;granule_count&#39;] == 0):
            self[i][&#39;status&#39;] = NeutrophilCellData.Status.NONGRANULATING

    def age(self):
        self.cell_data[&#39;iteration&#39;] += 1

    def kill_by_age(self, age_limit):
        for i in self.alive(self.cell_data[&#39;iteration&#39;] &gt; age_limit):
            self[i][&#39;dead&#39;] = True</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li><a title="nlisim.cell.CellList" href="../cell.html#nlisim.cell.CellList">CellList</a></li>
</ul>
<h3>Class variables</h3>
<dl>
<dt id="nlisim.modules.neutrophil.NeutrophilCellList.grid"><code class="name">var <span class="ident">grid</span> : <a title="nlisim.grid.RectangularGrid" href="../grid.html#nlisim.grid.RectangularGrid">RectangularGrid</a></code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="nlisim.modules.neutrophil.NeutrophilCellList.max_cells"><code class="name">var <span class="ident">max_cells</span> : int</code></dt>
<dd>
<div class="desc"></div>
</dd>
</dl>
<h3>Methods</h3>
<dl>
<dt id="nlisim.modules.neutrophil.NeutrophilCellList.absorb_cytokines"><code class="name flex">
<span>def <span class="ident">absorb_cytokines</span></span>(<span>self, n_absorb, cyto, grid)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def absorb_cytokines(self, n_absorb, cyto, grid):
    for index in self.alive():
        vox = grid.get_voxel(self[index][&#39;point&#39;])
        x = vox.x
        y = vox.y
        z = vox.z
        cyto[z, y, x] = (1 - n_absorb) * cyto[z, y, x]</code></pre>
</details>
</dd>
<dt id="nlisim.modules.neutrophil.NeutrophilCellList.age"><code class="name flex">
<span>def <span class="ident">age</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def age(self):
    self.cell_data[&#39;iteration&#39;] += 1</code></pre>
</details>
</dd>
<dt id="nlisim.modules.neutrophil.NeutrophilCellList.damage_hyphae"><code class="name flex">
<span>def <span class="ident">damage_hyphae</span></span>(<span>self, n_det, n_kill, time, health, grid, fungus: <a title="nlisim.modules.fungus.FungusCellList" href="fungus.html#nlisim.modules.fungus.FungusCellList">FungusCellList</a>, iron)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def damage_hyphae(self, n_det, n_kill, time, health, grid, fungus: FungusCellList, iron):
    for i in self.alive(self.cell_data[&#39;granule_count&#39;] &gt; 0):
        cell = self[i]
        vox = grid.get_voxel(cell[&#39;point&#39;])

        x_r = []
        y_r = []
        z_r = []

        if n_det == 0:
            index_arr = fungus.get_cells_in_voxel(vox)
            if len(index_arr) &gt; 0:
                iron[vox.z, vox.y, vox.x] = 0
            for index in index_arr:
                if (
                    fungus[index][&#39;form&#39;] == FungusCellData.Form.HYPHAE
                    and cell[&#39;granule_count&#39;] &gt; 0
                ):
                    fungus[index][&#39;health&#39;] -= health * (time / n_kill)
                    cell[&#39;granule_count&#39;] -= 1
                    cell[&#39;status&#39;] = NeutrophilCellData.Status.GRANULATING
                elif cell[&#39;granule_count&#39;] == 0:
                    cell[&#39;status&#39;] = NeutrophilCellData.Status.NONGRANULATING
                    break
        else:
            for num in range(0, n_det + 1):
                x_r.append(num)
                y_r.append(num)
                z_r.append(num)

            for num in range(-1 * n_det, 0):
                x_r.append(num)
                y_r.append(num)
                z_r.append(num)

            for x in x_r:
                for y in y_r:
                    for z in z_r:
                        zk = vox.z + z
                        yj = vox.y + y
                        xi = vox.x + x
                        if grid.is_valid_voxel(Voxel(x=xi, y=yj, z=zk)):
                            index_arr = fungus.get_cells_in_voxel(Voxel(x=xi, y=yj, z=zk))
                            if len(index_arr) &gt; 0:
                                iron[zk, yj, xi] = 0
                            for index in index_arr:
                                if (
                                    fungus[index][&#39;form&#39;] == FungusCellData.Form.HYPHAE
                                    and cell[&#39;granule_count&#39;] &gt; 0
                                ):
                                    fungus[index][&#39;health&#39;] -= health * (time / n_kill)
                                    cell[&#39;granule_count&#39;] -= 1
                                    cell[&#39;status&#39;] = NeutrophilCellData.Status.GRANULATING
                                elif cell[&#39;granule_count&#39;] == 0:
                                    cell[&#39;status&#39;] = NeutrophilCellData.Status.NONGRANULATING
                                    break</code></pre>
</details>
</dd>
<dt id="nlisim.modules.neutrophil.NeutrophilCellList.kill_by_age"><code class="name flex">
<span>def <span class="ident">kill_by_age</span></span>(<span>self, age_limit)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def kill_by_age(self, age_limit):
    for i in self.alive(self.cell_data[&#39;iteration&#39;] &gt; age_limit):
        self[i][&#39;dead&#39;] = True</code></pre>
</details>
</dd>
<dt id="nlisim.modules.neutrophil.NeutrophilCellList.move"><code class="name flex">
<span>def <span class="ident">move</span></span>(<span>self, rec_r, grid, cyto, tissue)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def move(self, rec_r, grid, cyto, tissue):
    for cell_index in self.alive(
        self.cell_data[&#39;status&#39;] == NeutrophilCellData.Status.NONGRANULATING
    ):
        cell = self[cell_index]
        vox = grid.get_voxel(cell[&#39;point&#39;])

        p = np.zeros(shape=27)
        vox_list = []
        i = -1

        for x in [0, 1, -1]:
            for y in [0, 1, -1]:
                for z in [0, 1, -1]:
                    zk = vox.z + z
                    yj = vox.y + y
                    xi = vox.x + x
                    if (
                        grid.is_valid_voxel(Voxel(x=xi, y=yj, z=zk))
                        and tissue[zk, yj, xi] != TissueTypes.AIR.value
                    ):
                        vox_list.append([x, y, z])
                        i += 1
                        if cyto[zk, yj, xi] &gt;= rec_r:
                            p[i] = cyto[zk, yj, xi]

        indices = np.argwhere(p != 0)
        num_vox_possible = len(indices)
        if num_vox_possible == 1:
            i = indices[0][0]
        elif num_vox_possible &gt; 1:
            inds = np.argwhere(p == p[np.argmax(p)])
            rg.shuffle(inds)
            i = inds[0][0]
        else:
            i = rg.integers(len(vox_list))

        cell[&#39;point&#39;] = Point(
            x=grid.x[vox.x + vox_list[i][0]],
            y=grid.y[vox.y + vox_list[i][1]],
            z=grid.z[vox.z + vox_list[i][2]],
        )

        self.update_voxel_index([cell_index])</code></pre>
</details>
</dd>
<dt id="nlisim.modules.neutrophil.NeutrophilCellList.produce_cytokines"><code class="name flex">
<span>def <span class="ident">produce_cytokines</span></span>(<span>self, n_det, n_n, grid, fungus: <a title="nlisim.modules.fungus.FungusCellList" href="fungus.html#nlisim.modules.fungus.FungusCellList">FungusCellList</a>, cyto)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def produce_cytokines(self, n_det, n_n, grid, fungus: FungusCellList, cyto):
    for i in self.alive():
        vox = grid.get_voxel(self[i][&#39;point&#39;])

        hyphae_count = 0

        x_r = []
        y_r = []
        z_r = []

        if n_det == 0:
            index_arr = fungus.get_cells_in_voxel(vox)
            for index in index_arr:
                if fungus[index][&#39;form&#39;] == FungusCellData.Form.HYPHAE:
                    hyphae_count += 1

        else:
            for num in range(0, n_det + 1):
                x_r.append(num)
                y_r.append(num)
                z_r.append(num)

            for num in range(-1 * n_det, 0):
                x_r.append(num)
                y_r.append(num)
                z_r.append(num)

            for x in x_r:
                for y in y_r:
                    for z in z_r:
                        zk = vox.z + z
                        yj = vox.y + y
                        xi = vox.x + x
                        if grid.is_valid_voxel(Voxel(x=xi, y=yj, z=zk)):
                            index_arr = fungus.get_cells_in_voxel(Voxel(x=xi, y=yj, z=zk))
                            for index in index_arr:
                                if fungus[index][&#39;form&#39;] == FungusCellData.Form.HYPHAE:
                                    hyphae_count += 1

        cyto[vox.z, vox.y, vox.x] = cyto[vox.z, vox.y, vox.x] + (n_n * hyphae_count)</code></pre>
</details>
</dd>
<dt id="nlisim.modules.neutrophil.NeutrophilCellList.recruit_new"><code class="name flex">
<span>def <span class="ident">recruit_new</span></span>(<span>self, rec_rate_ph, rec_r, granule_count, neutropenic, time, grid, tissue, cyto)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def recruit_new(self, rec_rate_ph, rec_r, granule_count, neutropenic, time, grid, tissue, cyto):
    num_reps = 0
    if not neutropenic:
        num_reps = rec_rate_ph  # number of neutrophils recruited per time step
    elif neutropenic and time &gt;= 48 and time &lt;= 96:
        num_reps = int((time - 48) / 8) * 3

    if num_reps &gt; 0:
        blood_index = np.argwhere(tissue == TissueTypes.BLOOD.value)
        blood_index = np.transpose(blood_index)
        mask = cyto[blood_index[2], blood_index[1], blood_index[0]] &gt;= rec_r
        blood_index = np.transpose(blood_index)
        cyto_index = blood_index[mask]
        rg.shuffle(cyto_index)

        for _ in range(0, num_reps):
            if len(cyto_index) &gt; 0:
                ii = rg.integers(len(cyto_index))
                point = Point(
                    x=grid.x[cyto_index[ii][2]],
                    y=grid.y[cyto_index[ii][1]],
                    z=grid.z[cyto_index[ii][0]],
                )

                status = NeutrophilCellData.Status.NONGRANULATING
                gc = granule_count
                self.append(
                    NeutrophilCellData.create_cell(point=point, status=status, granule_count=gc)
                )</code></pre>
</details>
</dd>
<dt id="nlisim.modules.neutrophil.NeutrophilCellList.update"><code class="name flex">
<span>def <span class="ident">update</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def update(self):
    for i in self.alive(self.cell_data[&#39;granule_count&#39;] == 0):
        self[i][&#39;status&#39;] = NeutrophilCellData.Status.NONGRANULATING</code></pre>
</details>
</dd>
</dl>
<h3>Inherited members</h3>
<ul class="hlist">
<li><code><b><a title="nlisim.cell.CellList" href="../cell.html#nlisim.cell.CellList">CellList</a></b></code>:
<ul class="hlist">
<li><code><a title="nlisim.cell.CellList.CellDataClass" href="../cell.html#nlisim.cell.CellList.CellDataClass">CellDataClass</a></code></li>
<li><code><a title="nlisim.cell.CellList.alive" href="../cell.html#nlisim.cell.CellList.alive">alive</a></code></li>
<li><code><a title="nlisim.cell.CellList.append" href="../cell.html#nlisim.cell.CellList.append">append</a></code></li>
<li><code><a title="nlisim.cell.CellList.cell_data" href="../cell.html#nlisim.cell.CellList.cell_data">cell_data</a></code></li>
<li><code><a title="nlisim.cell.CellList.create_from_seed" href="../cell.html#nlisim.cell.CellList.create_from_seed">create_from_seed</a></code></li>
<li><code><a title="nlisim.cell.CellList.extend" href="../cell.html#nlisim.cell.CellList.extend">extend</a></code></li>
<li><code><a title="nlisim.cell.CellList.get_cells_in_voxel" href="../cell.html#nlisim.cell.CellList.get_cells_in_voxel">get_cells_in_voxel</a></code></li>
<li><code><a title="nlisim.cell.CellList.get_neighboring_cells" href="../cell.html#nlisim.cell.CellList.get_neighboring_cells">get_neighboring_cells</a></code></li>
<li><code><a title="nlisim.cell.CellList.load" href="../cell.html#nlisim.cell.CellList.load">load</a></code></li>
<li><code><a title="nlisim.cell.CellList.save" href="../cell.html#nlisim.cell.CellList.save">save</a></code></li>
<li><code><a title="nlisim.cell.CellList.update_voxel_index" href="../cell.html#nlisim.cell.CellList.update_voxel_index">update_voxel_index</a></code></li>
</ul>
</li>
</ul>
</dd>
<dt id="nlisim.modules.neutrophil.NeutrophilState"><code class="flex name class">
<span>class <span class="ident">NeutrophilState</span></span>
<span>(</span><span>*, global_state: State, cells: <a title="nlisim.modules.neutrophil.NeutrophilCellList" href="#nlisim.modules.neutrophil.NeutrophilCellList">NeutrophilCellList</a> = NOTHING)</span>
</code></dt>
<dd>
<div class="desc"><p>Base type intended to store the state for simulation modules.</p>
<p>This class contains serialization support for basic types (float, int, str,
bool) and numpy arrays of those types.
Modules containing more complicated
state must override the serialization mechanism with custom behavior.</p>
<p>Method generated by attrs for class NeutrophilState.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class NeutrophilState(ModuleState):
    cells: NeutrophilCellList = attr.ib(default=attr.Factory(cell_list_factory, takes_self=True))
    neutropenic: bool
    rec_rate_ph: int
    rec_r: float
    n_absorb: float
    n_n: float
    n_det: int
    granule_count: int
    n_kill: float
    time_n: float
    age_limit: int</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li><a title="nlisim.module.ModuleState" href="../module.html#nlisim.module.ModuleState">ModuleState</a></li>
</ul>
<h3>Class variables</h3>
<dl>
<dt id="nlisim.modules.neutrophil.NeutrophilState.age_limit"><code class="name">var <span class="ident">age_limit</span> : int</code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="nlisim.modules.neutrophil.NeutrophilState.cells"><code class="name">var <span class="ident">cells</span> : <a title="nlisim.modules.neutrophil.NeutrophilCellList" href="#nlisim.modules.neutrophil.NeutrophilCellList">NeutrophilCellList</a></code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="nlisim.modules.neutrophil.NeutrophilState.granule_count"><code class="name">var <span class="ident">granule_count</span> : int</code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="nlisim.modules.neutrophil.NeutrophilState.n_absorb"><code class="name">var <span class="ident">n_absorb</span> : float</code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="nlisim.modules.neutrophil.NeutrophilState.n_det"><code class="name">var <span class="ident">n_det</span> : int</code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="nlisim.modules.neutrophil.NeutrophilState.n_kill"><code class="name">var <span class="ident">n_kill</span> : float</code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="nlisim.modules.neutrophil.NeutrophilState.n_n"><code class="name">var <span class="ident">n_n</span> : float</code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="nlisim.modules.neutrophil.NeutrophilState.neutropenic"><code class="name">var <span class="ident">neutropenic</span> : bool</code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="nlisim.modules.neutrophil.NeutrophilState.rec_r"><code class="name">var <span class="ident">rec_r</span> : float</code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="nlisim.modules.neutrophil.NeutrophilState.rec_rate_ph"><code class="name">var <span class="ident">rec_rate_ph</span> : int</code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="nlisim.modules.neutrophil.NeutrophilState.time_n"><code class="name">var <span class="ident">time_n</span> : float</code></dt>
<dd>
<div class="desc"></div>
</dd>
</dl>
<h3>Inherited members</h3>
<ul class="hlist">
<li><code><b><a title="nlisim.module.ModuleState" href="../module.html#nlisim.module.ModuleState">ModuleState</a></b></code>:
<ul class="hlist">
<li><code><a title="nlisim.module.ModuleState.load_attribute" href="../module.html#nlisim.module.ModuleState.load_attribute">load_attribute</a></code></li>
<li><code><a title="nlisim.module.ModuleState.load_state" href="../module.html#nlisim.module.ModuleState.load_state">load_state</a></code></li>
<li><code><a title="nlisim.module.ModuleState.save_attribute" href="../module.html#nlisim.module.ModuleState.save_attribute">save_attribute</a></code></li>
<li><code><a title="nlisim.module.ModuleState.save_state" href="../module.html#nlisim.module.ModuleState.save_state">save_state</a></code></li>
</ul>
</li>
</ul>
</dd>
</dl>
</section>
</article>
<nav id="sidebar">
<h1>Index</h1>
<div class="toc">
<ul></ul>
</div>
<ul id="index">
<li><h3>Super-module</h3>
<ul>
<li><code><a title="nlisim.modules" href="index.html">nlisim.modules</a></code></li>
</ul>
</li>
<li><h3><a href="#header-functions">Functions</a></h3>
<ul class="">
<li><code><a title="nlisim.modules.neutrophil.cell_list_factory" href="#nlisim.modules.neutrophil.cell_list_factory">cell_list_factory</a></code></li>
</ul>
</li>
<li><h3><a href="#header-classes">Classes</a></h3>
<ul>
<li>
<h4><code><a title="nlisim.modules.neutrophil.Neutrophil" href="#nlisim.modules.neutrophil.Neutrophil">Neutrophil</a></code></h4>
</li>
<li>
<h4><code><a title="nlisim.modules.neutrophil.NeutrophilCellData" href="#nlisim.modules.neutrophil.NeutrophilCellData">NeutrophilCellData</a></code></h4>
<ul class="">
<li><code><a title="nlisim.modules.neutrophil.NeutrophilCellData.NEUTROPHIL_FIELDS" href="#nlisim.modules.neutrophil.NeutrophilCellData.NEUTROPHIL_FIELDS">NEUTROPHIL_FIELDS</a></code></li>
<li><code><a title="nlisim.modules.neutrophil.NeutrophilCellData.Status" href="#nlisim.modules.neutrophil.NeutrophilCellData.Status">Status</a></code></li>
</ul>
</li>
<li>
<h4><code><a title="nlisim.modules.neutrophil.NeutrophilCellList" href="#nlisim.modules.neutrophil.NeutrophilCellList">NeutrophilCellList</a></code></h4>
<ul class="two-column">
<li><code><a title="nlisim.modules.neutrophil.NeutrophilCellList.absorb_cytokines" href="#nlisim.modules.neutrophil.NeutrophilCellList.absorb_cytokines">absorb_cytokines</a></code></li>
<li><code><a title="nlisim.modules.neutrophil.NeutrophilCellList.age" href="#nlisim.modules.neutrophil.NeutrophilCellList.age">age</a></code></li>
<li><code><a title="nlisim.modules.neutrophil.NeutrophilCellList.damage_hyphae" href="#nlisim.modules.neutrophil.NeutrophilCellList.damage_hyphae">damage_hyphae</a></code></li>
<li><code><a title="nlisim.modules.neutrophil.NeutrophilCellList.grid" href="#nlisim.modules.neutrophil.NeutrophilCellList.grid">grid</a></code></li>
<li><code><a title="nlisim.modules.neutrophil.NeutrophilCellList.kill_by_age" href="#nlisim.modules.neutrophil.NeutrophilCellList.kill_by_age">kill_by_age</a></code></li>
<li><code><a title="nlisim.modules.neutrophil.NeutrophilCellList.max_cells" href="#nlisim.modules.neutrophil.NeutrophilCellList.max_cells">max_cells</a></code></li>
<li><code><a title="nlisim.modules.neutrophil.NeutrophilCellList.move" href="#nlisim.modules.neutrophil.NeutrophilCellList.move">move</a></code></li>
<li><code><a title="nlisim.modules.neutrophil.NeutrophilCellList.produce_cytokines" href="#nlisim.modules.neutrophil.NeutrophilCellList.produce_cytokines">produce_cytokines</a></code></li>
<li><code><a title="nlisim.modules.neutrophil.NeutrophilCellList.recruit_new" href="#nlisim.modules.neutrophil.NeutrophilCellList.recruit_new">recruit_new</a></code></li>
<li><code><a title="nlisim.modules.neutrophil.NeutrophilCellList.update" href="#nlisim.modules.neutrophil.NeutrophilCellList.update">update</a></code></li>
</ul>
</li>
<li>
<h4><code><a title="nlisim.modules.neutrophil.NeutrophilState" href="#nlisim.modules.neutrophil.NeutrophilState">NeutrophilState</a></code></h4>
<ul class="two-column">
<li><code><a title="nlisim.modules.neutrophil.NeutrophilState.age_limit" href="#nlisim.modules.neutrophil.NeutrophilState.age_limit">age_limit</a></code></li>
<li><code><a title="nlisim.modules.neutrophil.NeutrophilState.cells" href="#nlisim.modules.neutrophil.NeutrophilState.cells">cells</a></code></li>
<li><code><a title="nlisim.modules.neutrophil.NeutrophilState.granule_count" href="#nlisim.modules.neutrophil.NeutrophilState.granule_count">granule_count</a></code></li>
<li><code><a title="nlisim.modules.neutrophil.NeutrophilState.n_absorb" href="#nlisim.modules.neutrophil.NeutrophilState.n_absorb">n_absorb</a></code></li>
<li><code><a title="nlisim.modules.neutrophil.NeutrophilState.n_det" href="#nlisim.modules.neutrophil.NeutrophilState.n_det">n_det</a></code></li>
<li><code><a title="nlisim.modules.neutrophil.NeutrophilState.n_kill" href="#nlisim.modules.neutrophil.NeutrophilState.n_kill">n_kill</a></code></li>
<li><code><a title="nlisim.modules.neutrophil.NeutrophilState.n_n" href="#nlisim.modules.neutrophil.NeutrophilState.n_n">n_n</a></code></li>
<li><code><a title="nlisim.modules.neutrophil.NeutrophilState.neutropenic" href="#nlisim.modules.neutrophil.NeutrophilState.neutropenic">neutropenic</a></code></li>
<li><code><a title="nlisim.modules.neutrophil.NeutrophilState.rec_r" href="#nlisim.modules.neutrophil.NeutrophilState.rec_r">rec_r</a></code></li>
<li><code><a title="nlisim.modules.neutrophil.NeutrophilState.rec_rate_ph" href="#nlisim.modules.neutrophil.NeutrophilState.rec_rate_ph">rec_rate_ph</a></code></li>
<li><code><a title="nlisim.modules.neutrophil.NeutrophilState.time_n" href="#nlisim.modules.neutrophil.NeutrophilState.time_n">time_n</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</nav>
</main>
<footer id="footer">
<p>Generated by <a href="https://pdoc3.github.io/pdoc"><cite>pdoc</cite> 0.9.1</a>.</p>
</footer>
</body>
</html>